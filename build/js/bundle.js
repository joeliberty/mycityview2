!function(){var e=angular.module("mycity-directives",[]);e.directive("dayAstroQuote",function(){return{restrict:"E",templateUrl:"partials/day-astro-quote.html"}}),e.directive("header",function(){return{restrict:"E",templateUrl:"partials/header.html"}}),e.directive("forcast",function(){return{restrict:"E",templateUrl:"partials/forcast.html"}}),e.directive("news-movies",function(){return{restrict:"E",templateUrl:"partials/news-movies.html"}}),e.directive("yelp",function(){return{restrict:"E",templateUrl:"partials/yelp.html"}}),e.directive("faroo",function(){return{restrict:"E",templateUrl:"partials/faroo.html"}}),e.directive("movies",function(){return{restrict:"E",templateUrl:"partials/movies.html"}}),e.directive("map",function(){return{restrict:"E",templateUrl:"partials/map.html"}}),e.directive("events",function(){return{restrict:"E",templateUrl:"partials/events.html"}}),e.directive("headerImage",function(){return{restrict:"E",templateUrl:"partials/header-image.html"}}),e.directive("places",function(){return{restrict:"E",templateUrl:"partials/places.html"}}),e.directive("credits",function(){return{restrict:"E",templateUrl:"partials/credits.html"}}),e.directive("twitter",function(){return{restrict:"E",templateUrl:"partials/twitter.html"}}),e.directive("meetup",function(){return{restrict:"E",templateUrl:"partials/meetup.html"}}),e.directive("rates",function(){return{restrict:"E",templateUrl:"partials/rates.html"}}),e.directive("nearby",function(){return{restrict:"E",templateUrl:"partials/nearby.html"}}),e.directive("navbar",function(){return{restrict:"E",templateUrl:"partials/navbar.html"}}),e.directive("imageonload",function(){return{restrict:"A",link:function(e,t,n){t.bind("load",function(){$("#image_spinner, #image_spinner i").css("display","none"),$("#header_image img").css({display:"block","margin-top":"53px"})})}}})}(),function(){"use strict";var e=angular.module("events_app",[]);e.factory("formatDate",function(){return{yyyy_mm_dd:function(e){var t=e.getDate(e);10>t&&(t="0"+t);var n=e.getMonth(e)+1;10>n&&(n="0"+n);var r=e.getFullYear(e);return r+"-"+n+"-"+t}}}),e.controller("EventsCtrl",["$scope","$rootScope","$http","formatDate",function(e,t,n,r){t.slidesdone=!1,e.num_of_categories=0,e.cats_returned=0,e.loading_events=!0,e.find_events=function(a,o){e.spinner=!0;var s=this,i=t.city,l=new Date;l=r.yyyy_mm_dd(l),l=l.replace(/-/g,"")+"00";var c=l+"-"+l,u="10";e.events={events:{title:"Retreiving events for "+t.city+"."}};var p="";p=t.state?i+","+t.state+","+t.country:i+","+t.country;var m="php/get_event.php";n({url:m,dataType:"json",method:"GET",cache:!0,params:{location:p,date:c,category:o,page_size:u,sort_order:"popularity",page_number:a},config:{category:o}}).success(function(t,n,r,a){if(e.cats_returned+=1,e.cats_returned>=e.num_of_categories&&(e.loading_events=!1),t.events){e.spinner=!1;var o;o=t.events.event.length?e.events=t.events.event:t.events;var i=[];$.each(o,function(e,t){var n={};n.image=null!==t.image?t.image.medium.url:"",n.title=null!==t.title?t.title:!1,n.url=null!==t.url?t.url:!1,n.venue_name=null!==t.venue_name?t.venue_name:!1,n.start_time=null!==t.start_time?t.start_time:!1;var r=s.clean_stop_time(n.start_time,t.stop_time);n.stop_time=null!==r?r:!1,n.description=null!==t.description?s.cleanIt(t.description):!1,n.venue_address=null!==t.venue_address?t.venue_address:!1,n.geocode_type=null!==t.geocode_type?s.checkGeocode(t.geocode_type):!1,n.latitude=null!==t.latitude?t.latitude:!1,n.longitude=null!==t.longitude?t.longitude:!1,i.push(n)}),$(".newspanel").scrollTop(0,0);var l=String(a.config.category),c="cat"+l;e[c]=l,e[l+"totalItems"]=t.total_items,e[l+"currentPage"]=t.page_number,e[l+"numOfPages"]=t.page_count,e[l+"itemsPerPage"]=u;var p=parseInt(e[l+"totalItems"])<=parseInt(e[l+"itemsPerPage"])?"none":"block";$("#"+c).css("display",p),e[l]=i}}),this.cleanIt=function(e){return e.replace(/(<([^>]+)>)/gi," ")},this.clean_stop_time=function(e,t){if(e&&t){var n=e.indexOf(" "),r=e.slice(0,n);n=t.indexOf(" ");var a=t.slice(0,n),o=t.slice(n);return o=r==a?o:t}},this.checkGeocode=function(e){return"EVDB Geocoder"==e?!1:!0}},t.$watch("slidesdone",function(){t.slidesdone&&setTimeout(function(){e.find_categories()},500)}),e.find_categories=function(){var t=["attractions","art","business","clubs_associations","comedy","community","family_fun_kids","festivals_parades","fundraisers","learning_education","movies_film","music","outdoors_recreation","performing_arts","politics_activism","sales","singles_social","sports","support","technology"];e.num_of_categories=t.length;for(var n=0;n<t.length;n++)e.find_events(1,t[n])},e.setPage=function(t,n){e.find_events(t,n)}}]),e.directive("hmtext",function(){return{restrict:"EA",scope:{hmtext:"=hmtext",hmlimit:"=",hmfulltext:"="},templateUrl:"partials/moreless.html",controller:["$scope",function(e){e.toggleValue=function(){e.hmfulltext=e.hmfulltext===!0?!1:e.hmfulltext===!1?!0:!0}}]}}),e.directive("eventa",function(){return{restrict:"EA",scope:{url:"=",image:"=",title:"=",venuename:"=",start:"=",stop:"=",address:"="},templateUrl:"partials/eventsa.html"}}),e.directive("eventb",function(){return{restrict:"EA",scope:{geocode:"=",latitude:"=",longitude:"=",url:"="},templateUrl:"partials/eventsb.html"}}),e.filter("cleanTime",function(){return function(e){if(e){if(e.indexOf(" ")){var t=e.split(" "),n="00:00:00"!=t[1]?e:t[0];return n}return e}}}),e.filter("capitalize_fist_char",function(){return function(e){if(e){var t=e.charAt(0).toUpperCase()+e.slice(1);return t=t.replace(/_/g," ")}}})}(),function(){"use strict";var e=angular.module("faroo_app",[]);e.controller("FarooCtrl",["$scope","$rootScope","$http","formatDate","$q",function(e,t,n,r,a){$(".tabs_container").css("visibility","visible"),e.is_search=!1,e.query="",e.find_news=function(t,r){e[r+"_spinner"]=!0,e.is_search=!1;var o=this,s="search"==r?e.query:r,i="php/get_faroo.php";n({url:i,dataType:"json",method:"GET",cache:!0,params:{start:10*(t-1)+1,query:s},config:{term:r,page:t}}).success(function(t,n,r,a){if(t){$(".newspanel").scrollTop(0,0);var s=String(a.config.term);e[s+"_spinner"]=!1;var i=String(a.config.page);t.currentPage=i,o.isImage(t,s);var l=parseInt(t.count/10);$(".newspanel").css("display","block");var c=1>=l?"false":"true";e["is_"+s]=c}}),this.isImage=function(t,n){$.each(t.results,function(e,t){var n=a.defer(),r=new Image;r.onerror=function(){n.resolve(!1)},r.onload=function(){n.resolve(!0)},r.src=t.iurl,n.promise.then(function(e){e||(t.iurl="")})}),e[n]=t}},e.setPage=function(t,n){e.find_news(t,n)},e.get_article=function(t){e.find_news(1,t)},e.submit=function(){return""===this.query?void alert("Please type in a search term."):(e.query=this.query.replace(/ /g,"%20"),void e.find_news(1,"search"))}}]),e.directive("farootopic",function(){return{restrict:"EA",scope:{article:"=article",spinner:"="},templateUrl:"partials/farootopic.html"}})}(),function(){"use strict";var e=angular.module("astro_app",[]);e.controller("AstroCtrl",["$scope","$http","$rootScope",function(e,t,n){e.signs=[{name:"Aries",link:"images/astro/aries.png"},{name:"Taurus",link:"images/astro/taurus.png"},{name:"Gemini",link:"images/astro/gemini.png"},{name:"Cancer",link:"images/astro/cancer.png"},{name:"Leo",link:"images/astro/leo.png"},{name:"Virgo",link:"images/astro/virgo.png"},{name:"Libra",link:"images/astro/libra.png"},{name:"Scorpio",link:"images/astro/scorpio.png"},{name:"Sagittarius",link:"images/astro/sagittarius.png"},{name:"Capricorn",link:"images/astro/capricorn.png"},{name:"Aquarius",link:"images/astro/aquarius.png"},{name:"Pisces",link:"images/astro/pisces.png"}],e.horoscope="Choose your sign",e.call=function(n){e.horoscope="",$("#astro_horoscope i").css("display","inline-block"),t({url:"https://sender.blockspring.com/api_v2/blocks/dba3c2ca01c063df9cdf9fc6f0cf93f9?api_key=db81b1fa591380eb4110ff3093829176",method:"POST",dataType:"json",data:JSON.stringify({sign:n})}).success(function(t){$("#astro_horoscope i").css("display","none"),e.horoscope=t.horoscope})}}])}(),function(){"use strict";var e=angular.module("map_app",[]);e.controller("GetMapCtrl",["$scope","$rootScope",function(e,t){{var n=t.city_id,r=t.locs;t.city_state_country}t.lat_lng=new google.maps.LatLng(r[n].lat,r[n].lon),t.zoom=13;var a={zoom:13,center:t.lat_lng},o=new google.maps.Map(document.getElementById("map-canvas"),a);t.map=o;var s=[];t.markers=s;var i="";e.$watch("lat_lng",function(){var e=null,n=!1;if("object"==typeof t.lat_lng)e=t.lat_lng;else{for(var r=0;r<s.length;r++)s[r].setMap(null);var a=t.lat_lng.split(","),l=a[0],c=a[1];e=new google.maps.LatLng(l,c),n=!0}if(i=new google.maps.Marker({position:e,map:o}),o.setZoom(t.zoom),o.setCenter(i.getPosition()),s.push(i),n){var u,p=$("#map_container"),m=p.offset().top,f=p.height(),d=$(window).height();u=d>f?m-(d/2-f/2):m;var g=700;$("html, body").animate({scrollTop:u},g)}}),$("#copyright").css("display","inline-block")}]),e.controller("SetLatLng",["$scope","$rootScope",function(e,t){e.isCollapsed=!1,e.set_marker=function(e,n){var r,a;if("object"==typeof e){r=null,a=null;for(var o in e)if(e.hasOwnProperty(o))switch(o){case"F":a=e[o];break;case"lng":a=e[o];break;case"lon":a=e[o];break;case"longitude":a=e[o];break;case"A":r=e[o];break;case"lat":r=e[o];break;case"latitude":r=e[o];break;case"k":r=e[o];break;case"D":a=e[o]}}else r=e,a=n;t.lat_lng=r+", "+a,t.zoom=18}}])}(),function(){"use strict";var e=angular.module("meetup_app",[]);e.controller("meetupCtrl",["$scope","$rootScope","$http",function(e,t,n){e.load_meetup=function(){var n=(new Date,new Date),r=new Date(n);r=r.setDate(n.getDate()+5),r=new Date(r);var a=t.city,o=t.state,s=t.country,i=t.locs,l=t.city_id,c=i[l].lat,u=i[l].lon,p="https://api.meetup.com/2/open_events?callback=?&lat="+c+"&country="+s+"&city="+a+"&state="+o+"&text=travel&lon="+u+"&key=5579136d5823c8054341258e452f",m=[];$("#meetup_spinner i").css("display","inline-block"),$.getJSON(p,function(t){$("#meetup_spinner i").css("display","none"),$.each(t.results,function(e,t){if(t.time<=r){var n={};n.city=a,n.name=t.name,n.group_name=t.group.name,n.description=t.description,n.join_mode=t.group.join_mode,n.who=t.group.who,n.why=t.why,n.how_to_find_us=t.how_to_find_us,"undefined"!=typeof t.venue&&(n.venue_name=t.venue.name,n.venue_address=t.venue.address,n.venue_city=t.venue.city,n.venue_phone=t.venue.phone);var o=new Date(t.time).toString();if(n.time=o.slice(0,21),"undefined"!=typeof t.fee&&(n.fee_amount=t.fee.amount,n.fee_currency=t.fee.currency,n.fee_description=t.fee.description),"undefined"!=typeof t.venue){var s=t.venue.lat,i=t.venue.lon;t.venue.lat&&t.venue.lon&&(n.point={lat:s,lon:i})}m.push(n)}}),e.meetup_unavailable=0===m.length?!0:!1,e.events=m}),e.select=function(t){e.selected=t===e.selected?null:t},e.isActive=function(t){return e.selected===t}},t.$watch("slidesdone",function(){t.slidesdone&&setTimeout(function(){e.load_meetup()},500)})}])}(),function(){"use strict";var e=angular.module("movie_app",["ui.bootstrap"]);e.controller("MovieCtrl",["$scope","$rootScope","$http",function(e,t,n){var r=t.city.replace(" ",",")+","+t.state;e.good_data=!0,e.theaters={events:{name:"Unavailable"}},n({url:"php/get_movies.php",dataType:"json",method:"GET",params:{city:r}}).success(function(t){t.length>0&&(e.theaters=t)})}]),e.filter("movie_times",function(){return function(e){return e.replace(/(&nbsp)*/g,"")}}),e.filter("theater_name",function(){return function(e,t){return null===e||-1!=e.indexOf(";&#")?(t.good_data=!1,"Unavailable"):(e.replace(/(&nbsp)*/g,""),e)}})}(),function(){"use strict";var e=angular.module("nearby_app",[]);e.controller("NearbyCtrl",["$scope","$rootScope",function(e,t){function n(t){var n;n=t?"Error: The Geolocation service failed.":"Error: Your browser doesn't support geolocation.",e.set_message(n)}e.message="Select a place to find.",e.getCoordinates=function(r){e.what=r,e.set_message("Finding nearby "+r+"..."),navigator.geolocation?navigator.geolocation.getCurrentPosition(function(n){t.user_lat=n.coords.latitude,t.user_lng=n.coords.longitude,e.find_nearby(t.user_lat,t.user_lng,r)},function(){n(!0)}):n(!1)},e.set_message=function(t){e.message=t},e.find_nearby=function(n,r,a){function o(n,r){if(n.length){var o=n.length>1?"locations":"location";if(e.set_message("Found "+n.length+" "+o+" for "+e.what+"."),r==google.maps.places.PlacesServiceStatus.OK){for(var s=0;s<n.length;s++)e.createMarker(n[s],f);t.map.fitBounds(l)}}else e.set_message("Sorry there were no "+a+"'s found in 500 meters of your area.")}function s(){for(var e=0;e<t.markers.length;e++)t.markers[e].setMap(null)}s();var i=new google.maps.LatLng(n,r),l=new google.maps.LatLngBounds,c=new google.maps.LatLng(n,r),u=new google.maps.Marker({position:c,map:t.map});l.extend(u.getPosition()),t.map.setCenter(u.getPosition()),t.markers.push(u);var p={location:i,rankBy:google.maps.places.RankBy.DISTANCE,types:[a]},m=new google.maps.InfoWindow,f=new google.maps.places.PlacesService($("#for_places").get(0));f.nearbySearch(p,o),e.getDetails=function(e,t){var n={placeId:e.place_id};t.getDetails(n,function(e,t){if(t==google.maps.places.PlacesServiceStatus.OK){if("undefined"!=typeof e.formatted_phone_number){var n=e.formatted_phone_number;n=n.replace(/ /g,""),n=n.replace("(",""),n=n.replace(")",""),e.formatted_phone_number&&$("#info_win_phone_detail").html("<a href=tel:"+n+">ph: "+e.formatted_phone_number+"</a>"),e.website&&$("#info_win_website").html('<a href="'+e.website+'"  target="blank">website</a>')}}else console.log("got error")})},e.createMarker=function(n,r){var a="009933",o=new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|"+a,new google.maps.Size(21,34),new google.maps.Point(0,0),new google.maps.Point(10,34)),s=(n.geometry.location,new google.maps.Marker({map:t.map,position:n.geometry.location,icon:o}));l.extend(s.getPosition()),t.markers.push(s),google.maps.event.addListener(s,"click",function(){e.getDetails(n,r);var a="";if(a+="<div><strong>"+n.name+"</strong><br/>",n.rating&&(a+="Rating: "+n.rating+"<br/>"),n.price_level&&(a+="Price Level: "+n.price_level+"<br/>"),n.opening_hours){var o=n.opening_hours.open_now?"Yes":"No";a+="Open: "+o+"<br/>"}n.vicinity&&(a+=n.vicinity+"<br/>"),a+="<p><span id='info_win_phone_detail'></span>",a+="<span style='padding-left:12px;' id='info_win_website'></span></p>",m.setContent(a),m.open(t.map,this)})}},e.places=["airport","aquarium","art_gallery","atm","bakery","bank","bar","beauty_salon","bicycle_store","book_store","bowling_alley","bus_station","cafe","campground","car_dealer","car_rental","car_repair","car_wash","casino","church","clothing_store","convenience_store","dentist","department_store","doctor","electrician","electronics_store","fire_station","florist","food","furniture_store","gas_station","grocery_or_supermarket","gym","hair_care","hardware_store","hindu_temple","home_goods_store","hospital","jewelry_store","laundry","library","liquor_store","locksmith","lodging","meal_delivery","meal_takeaway","mosque","movie_rental","movie_theater","museum","night_club","park","parking","pet_store","pharmacy","place_of_worship","police","post_office","restaurant","rv_park","school","shoe_store","shopping_mall","spa","store","subway_station","synagogue","taxi_stand","train_station","university","veterinary_care","zoo"],e.status={isopen:!1},e.toggled=function(e){$log.log("Dropdown is now: ",e)},e.toggleDropdown=function(t){t.preventDefault(),t.stopPropagation(),e.status.isopen=!e.status.isopen}}]),e.filter("remove_underscore",function(){return function(e){return-1==e.indexOf("_")?e:e.replace(/_/g," ")}})}(),function(){"use strict";var e=angular.module("places_app",[]);e.controller("PlacesCtrl",["$scope","$http","$rootScope","$q",function(e,t,n,r){e.load_places=function(){function t(t,n,r){if(n==google.maps.places.PlacesServiceStatus.OK){var o=new google.maps.places.PlacesService($("#for_places").get(0));e.places=[];for(var s=0;s<t.length;s++)a(s,t,o)}}var r=n.city_id,o=n.locs,s=new google.maps.LatLng(o[r].lat,o[r].lon),i={location:s,radius:500,types:["amusement_park","aquarium","art_gallery","casino","gym","library","movie_theater","museum","night_club","park","shopping_mall","spa","stadium","train_station","zoo"]},l=new google.maps.places.PlacesService($("#for_places").get(0));l.nearbySearch(i,t)},n.$watch("slidesdone",function(){n.slidesdone&&setTimeout(function(){e.load_places()},500)});var a=function(e,t,n){!function(e){setTimeout(function(){var r={placeId:t[e].place_id};n.getDetails(r,function(e,t){if(t==google.maps.places.PlacesServiceStatus.OK){var n="undefined"!=typeof e.photos?e.photos[0].getUrl({maxWidth:200,maxHeight:200}):null;if(!n)return;o(n,e)}else console.log("got error")})},1e3+1e3*e)}(e)},o=function(t,n){var a=r.defer(),o=new Image;o.onerror=function(){a.resolve(!1)},o.onload=function(){a.resolve(!0)},o.src=t,a.promise.then(function(r){r?(n.url=t,e.places.push(n)):(n.url=!1,e.places.push(n))})}}]),e.filter("formatType",function(){return function(e){if(-1==e.indexOf("_"))return e;for(var t=e.split("_"),n="",r=0;r<t.length;r++){var a=t[r];a=a.charAt(0).toUpperCase()+a.slice(1),n+=a+" "}return n}})}(),function(){"use strict";var e=angular.module("quote_app",[]);e.controller("QuoteCtrl",["$scope","$http",function(e,t){var n=this,r=300,a=[];t.get("js/quotes.json").success(function(t){$.each(t,function(){var e={};e.quote=this.quote,e.author=this.author,a.push(e)});var o=Math.floor(Math.random()*a.length),s=a[o];e.fullquote=s.quote,e.author="--"+s.author,e.toggle_quote=!0,e.fullquote.length<=r?e.quote=e.fullquote:n.get_less_n_more("less")}),this.get_less_n_more=function(t){e.quote="less"==t?e.fullquote.substring(0,r)+"<span class=more>... more</span>":e.fullquote.substring(0,e.fullquote.length)+"<span class=less> less</span>"},e.toggle_more_less=function(){e.toggle_quote?(e.toggle_quote=!1,n.get_less_n_more("more")):(e.toggle_quote=!0,n.get_less_n_more("less"))}}])}(),function(){"use strict";var e=angular.module("rates_app",["ui.bootstrap"]);e.controller("RatesCtrl",["$scope","$rootScope","$http",function(e,t,n){e.load_rates=function(){var t=this;e.amount=1,e.currencies=[],e.base_rates=["USD","AUD","EUR"],e.sel_grp=["USD","EUR","GBP","INR","AUD","CAD","CNY","NZD","JPY","RUB"],n.get("js/currencies.json").success(function(n){e.all_currencies=n;for(var r=0;r<e.base_rates.length;r++){for(var a="",o=0;o<e.sel_grp.length;o++)a+="'"+e.base_rates[r]+e.sel_grp[o]+"',";a=a.substring(0,a.length-1);var s="https://query.yahooapis.com/v1/public/yql?q=select * from yahoo.finance.xchange where pair in ("+a+")&format=json&diagnostics=true&env=store://datatables.org/alltableswithkeys&callback=";$.getJSON(s,function(n){var r={};$.each(n.query.results.rate,function(n,a){var o=a.id;e.base=o.slice(0,3),r.sortid=e.base_rates.indexOf(e.base),a.country=o.slice(3),a.fullname=t.get_full_names(o.slice(3),e.all_currencies)}),r.base=e.base,r.fullname=t.get_full_names(e.base,e.all_currencies),r.rates=n.query.results.rate,e.currencies.push(r),e.currencies.length==e.base_rates.length&&e.currencies.sort(t.compare)})}}),this.compare=function(e,t){return e.sortid<t.sortid?-1:e.sortid>t.sortid?1:0},this.get_full_names=function(e,t){for(var n in t)if(t.hasOwnProperty(n)&&n===e)return t[n]}},t.$watch("slidesdone",function(){t.slidesdone&&setTimeout(function(){e.load_rates()},500)})}])}(),function(){"use strict";var e=angular.module("time_app",[]);e.controller("GetTimeCtrl",["$scope","$rootScope","$http",function(e,t,n){var r=t.city_id,a=t.locs,o="jliberty";n({url:"http://api.geonames.org/timezoneJSON",dataType:"jsonp",method:"GET",params:{lat:a[r].lat,lng:a[r].lon,username:o}}).success(function(e){t.times.fulltime=e.time;var n=e.time.split(" ");t.times.current=n[1];var r=e.sunrise.split(" ");t.times.sunrise=r[1];var a=e.sunset.split(" ");t.times.sunset=a[1]})}])}(),function(){"use strict";var e=angular.module("twitter_app",[]);e.factory("formatText",function(){return{add_links:function(e,t){for(var n=!1,r=e,a=0;!n;){var o=r.indexOf(t);if(-1==o||a>100)return n=!0,e;var s=r.substring(o),i=s.indexOf(" "),l="";switch(-1==i&&(i=r.length),s=s.substring(0,i),t){case"http":l="<a href="+s+' target="blank">'+s.substring(7)+"</a>";break;case"#":l="<a href=https://twitter.com/hashtag/"+s.substring(1)+'?src=hash target="blank">'+s.substring(0)+"</a>";break;case"@":l="<a href=https://twitter.com/"+s.substring(1)+' target="blank">'+s.substring(0)+"</a>"}var c=parseInt(o+i);r=r.substring(c),e=e.replace(s,l),a+=1}}}}),e.controller("TwitterCtrl",["$scope","$rootScope","$http",function(e,t,n){e.load_twitter=function(){var r="",a=t.city.replace(" ","%20");r=t.state?"%23"+a+"%20"+t.state:"%23"+a+"%20"+t.country,$("#twitter_spinner i").css("display","inline-block"),n({url:"php/get_twitter.php",dataType:"json",params:{q:r},method:"GET"}).success(function(t){$("#twitter_spinner i").css("display","none"),e.tweets=t})},t.$watch("slidesdone",function(){t.slidesdone&&setTimeout(function(){e.load_twitter()},500)})}]),e.filter("addUrls",["$sce","formatText",function(e,t){return function(n){return n?(n=t.add_links(n,"http"),n=t.add_links(n,"#"),n=t.add_links(n,"@"),e.trustAsHtml(n)):void 0}}])}(),function(){"use strict";var e=angular.module("weather_app",[]);e.controller("CurWeatherCtrl",["$scope","$rootScope","$http",function(e,t,n){n({url:"http://api.openweathermap.org/data/2.5/weather",dataType:"json",method:"GET",params:{q:t.city_state_country,appid:"4e5600686359104d6dd1ad18d82bd70b"}}).success(function(t){e.cur_temp=t.main.temp,e.temp_max=t.main.temp_max,e.imagepath="http://openweathermap.org/img/w/"+t.weather[0].icon+".png",e.description=t.weather[0].description})}]),e.controller("DayForcastCtrl",["$scope","$rootScope","$http",function(e,t,n){var r="http://api.openweathermap.org/data/2.5/forecast";n({url:r,dataType:"json",method:"GET",params:{q:t.city_state_country,appid:"4e5600686359104d6dd1ad18d82bd70b"}}).success(function(n){var r="";r=t.times.fulltime?new Date(t.times.fulltime):new Date;var a=[],o=0,s=!1,i=n.list;for(var l in i)if(i.hasOwnProperty(l)){if(s)break;var c={},u=i[l];if("undefined"==u.dt)continue;var p=new Date(1e3*u.dt);if(r>p)continue;c.temps=u.main.temp;var m=p.toString(),f=m.slice(16,21);c.times=f;var d=u.weather[0].icon,g="http://openweathermap.org/img/w/"+d+".png";c.icons=String(g),c.descripts=String(u.weather[0].description),o+=1,o>11&&(s=!0),a.push(c)}e.daycast=a})}]),e.filter("temp",["$filter","$rootScope",function(e,t){return function(t,n){if(t){t-=273.15;var r=n[0],a=n[1];r=1;var o=e("number"),s="C"==a?"°C":"°F";return t&&"F"==a&&(t=(9*t/5+32).toFixed(2)),o(t,r)+s}return""}}])}(),function(){"use strict";var e=angular.module("yelp_app",[]);e.controller("MusicVenueCtrl",["$scope","$rootScope","$http",function(e,t,n){e.load_yelp=function(){n({url:"php/yelp_sample.php",method:"GET",params:{term:"hotels",location:t.city_state_country}}).success(function(t){var n=[];n.push(jQuery.parseJSON(t)),n=jQuery.parseJSON(n),e.yelp_unavailable=!1,n.error&&(e.yelp_unavailable=!0),e.musicvenues=n.businesses})},t.$watch("slidesdone",function(){t.slidesdone&&setTimeout(function(){e.load_yelp()},500)}),e.select=function(t){t===e.selected?!0:!1;e.selected=t===e.selected?null:t},e.isActive=function(t){return e.selected===t}}]),e.controller("RestaurantCtrl",["$scope","$rootScope","$http",function(e,t,n){e.load_yelp=function(){n({url:"php/yelp_sample.php",method:"GET",params:{term:"restaurant",location:t.city_state_country}}).success(function(t){var n=[];n.push(jQuery.parseJSON(t)),n=jQuery.parseJSON(n),e.yelp_unavailable=!1,n.error&&(e.yelp_unavailable=!0),e.restaurants=n.businesses})},t.$watch("slidesdone",function(){t.slidesdone&&setTimeout(function(){e.load_yelp()},500)}),e.select=function(t){t===e.selected?!0:!1;e.selected=t===e.selected?null:t},e.isActive=function(t){return e.selected===t}}]),e.controller("ClubCtrl",["$scope","$rootScope","$http",function(e,t,n){e.load_yelp=function(){n({url:"php/yelp_sample.php",method:"GET",params:{term:"happy hour",location:t.city_state_country}}).success(function(t){var n=[];n.push(jQuery.parseJSON(t)),n=jQuery.parseJSON(n);Object.prototype.toString.call(n);e.yelp_unavailable=!1,n.error&&(e.yelp_unavailable=!0),e.clubs=n.businesses})},t.$watch("slidesdone",function(){t.slidesdone&&setTimeout(function(){e.load_yelp()},500)}),e.select=function(t){t===e.selected?!0:!1;e.selected=t===e.selected?null:t},e.isActive=function(t){return e.selected===t}}]),e.controller("GallaryCtrl",["$scope","$rootScope","$http",function(e,t,n){e.load_yelp=function(){n({url:"php/yelp_sample.php",method:"GET",params:{term:"show",location:t.city_state_country}}).success(function(t){var n=[];n.push(jQuery.parseJSON(t)),n=jQuery.parseJSON(n),e.yelp_unavailable=!1,n.error&&(e.yelp_unavailable=!0),e.galleries=n.businesses})},t.$watch("slidesdone",function(){t.slidesdone&&setTimeout(function(){e.load_yelp()},500)}),e.select=function(t){e.selected=t===e.selected?null:t},e.isActive=function(t){return e.selected===t}}]),e.filter("toString",function(){return function(e){return e.toString()}})}(),function(){"use strict";var e=angular.module("Site",["ngRoute","ui.bootstrap","ngSanitize","weather_app","yelp_app","astro_app","movie_app","faroo_app","quote_app","time_app","mycity-directives","events_app","map_app","places_app","twitter_app","ngTouch","meetup_app","rates_app","nearby_app"]);e.controller("ShowHomeController",["$scope","$rootScope","$location","$http","MyService",function(e,t,n,r,a){t.locs=a.get_json_data(),t.nameLength=20,t.times={fulltime:0,current:0,sunrise:0,sunset:0};var o=n.hash();t.city=o?o.replace(/_/g," "):"Melbourne",t.city_id=o?o:"Melbourne",t.state=o?t.locs[o].state:"",t.country=o?t.locs[o].country:"au",t.map=null,t.city_state_country="",t.city_state_country=t.state?t.city+", "+t.state+", "+t.country:t.city+", "+t.country;var s=t.locs;e.actions=[];for(var i in s)if(s.hasOwnProperty(i)){var l={};l.id=i;var c=s[i].state?i.replace(/_/g," ")+", "+s[i].state.toUpperCase():i.replace(/_/g," ");l.name=c,e.actions.push(l)}e.setAction=function(t){e.selectedAction=t,n.hash(e.selectedAction.id)}}]),e.controller("GetHeaderImage",["$scope","$rootScope","$http",function(e,t,n){var r,a=t.city_id.toLowerCase();t.state&&(r=t.state.toLowerCase());var o=t.country.toLowerCase(),s="../images/"+a;r&&(s+="_"+r),s+="_"+o,e.myInterval=7e3,n({url:"php/get_image_files.php",dataType:"json",method:"GET",params:{filename:s}}).success(function(n){e.slides=n,t.slidesdone=!0})}]),e.service("MyService",["$http",function(e){var t=null,n=e.get("js/city_data.json").success(function(e){t=e});return{promise:n,get_json_data:function(){return t}}}]),e.config(["$routeProvider",function(e){e.when("/ShowHome",{templateUrl:"partials/home.html",controller:"ShowHomeController",resolve:{MyServiceData:["MyService",function(e){return e.promise}]}}).otherwise({redirectTo:"/ShowHome"})}]),e.directive("tooltip",function(){return{restrict:"A",link:function(e,t,n){$(t).hover(function(){$(t).tooltip("show"),setTimeout(function(){$(t).tooltip("hide")},3e3)},function(){$(t).tooltip("hide")})}}})}();